---
title: cookie/session机制(持续更新)
date: 2020-12-03 22:09:35
tags: [cookie,session]
categories:
    - web
    - web
---
参考博客：
* [cookie和session的详解与区别 ](https://www.cnblogs.com/l199616j/p/11195667.html)


　会话（Session）跟踪是Web程序中常用的技术，用来跟踪用户的整个会话。**常用的会话跟踪技术是Cookie与Session**：
 * Cookie通过在客户端记录信息确定用户身份。
 * Session通过在服务器端记录信息确定用户身份。
 * 什么时候不能用Cookie，什么时候不能用Session。
## cookie
### 为什么使用cookie
* HTTP协议是**无状态**的协议。一旦数据交换完毕，客户端与服务器端的连接就会关闭，再次交换数据需要建立新的连接。这就意味着服务器无法从连接上跟踪会话。
### 什么是cookie
* cookie是一种记录客户状态的机制
* 给客户端们颁发一个通行证吧，每人一个，无论谁访问都必须携带自己通行证。这样服务器就能从通行证上确认客户身份了。这就是Cookie的工作原理。
* Cookie实际上是一小段的文本信息。客户端请求服务器，如果服务器需要记录该用户状态，就使用response向客户端浏览器颁发一个Cookie。客户端浏览器会把Cookie保存起来。当浏览器再请求该网站时，浏览器把请求的网址连同该Cookie一同提交给服务器。服务器检查该Cookie，以此来辨认用户状态。服务器还可以根据需要修改Cookie的内容。
### cookie特性

Cookie具有不可跨域名性
域名
路径
安全属性
### cookie案例：永久登录

## session

### 什么是session

* Session是另一种记录客户状态的机制。
* 客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上，这就是Session。
* Session相当于程序在服务器上建立的一份客户档案，客户来访的时候只需要查询客户档案表就可以了。
* 客户端浏览器再次访问时只需要从该Session中查找该客户的状态就可以了。
### session如何判别是否为同一用户

* 虽然Session保存在服务器，对客户端是透明的，它的正常运行仍然**需要客户端浏览器的支持**。这是因为**Session需要使用Cookie作为识别标志**。
* **HTTP协议是无状态的**，Session不能依据HTTP连接来判断是否为同一客户
* 因此服务器向客户端浏览器发送一个名为JSESSIONID的Cookie，它的值为该Session的id（也就是HttpSession.getId()的返回值）。Session依据该Cookie来识别是否为同一用户。
* 该Cookie为**服务器自动生成**的，它的maxAge属性一般为–1，表示**仅当前浏览器内有效**，并且**各浏览器窗口间不共享**，**关闭浏览器就会失效**。
* 因此同一机器的两个浏览器窗口访问服务器时，会生成两个不同的Session。但是由浏览器窗口内的链接、脚本等打开的新窗口（也就是说不是双击桌面浏览器图标等打开的窗口）除外。这类子窗口会共享父窗口的Cookie，因此会共享一个Session。


注意：新开的浏览器窗口会生成新的Session，但子窗口除外。子窗口会共用父窗口的Session。例如，在链接上右击，在弹出的快捷菜单中选择“在新窗口中打开”时，子窗口便可以访问父窗口的Session。　　
如果客户端浏览器将Cookie功能禁用，或者不支持Cookie怎么办？例如，绝大多数的手机浏览器都不支持Cookie。Java Web提供了另一种解决方案：URL地址重写。
### cookie与session不同点
* Cookie保存在客户端浏览器中。Cookie机制是通过检查客户身上的“通行证”来确定客户身份。
* Session保存在服务器上。Session机制就是通过检查服务器上的“客户明细表”来确认客户身份。

### session特性
生命周期
有效期
### session案例

### URL地址重写



